{"id":"5t8L","dependencies":[{"name":"/Users/gokul/r/cityscope/cityscope_for_world/scanner/.babelrc","includedInParent":true,"mtime":1566133864000},{"name":"/Users/gokul/r/cityscope/cityscope_for_world/scanner/package.json","includedInParent":true,"mtime":1566217542247},{"name":"../Storage","loc":{"line":1,"column":7},"parent":"/Users/gokul/r/cityscope/cityscope_for_world/scanner/js/CV/MatrixTransform.js","resolved":"/Users/gokul/r/cityscope/cityscope_for_world/scanner/js/Storage.js"},{"name":"core-js","loc":{"line":2,"column":18},"parent":"/Users/gokul/r/cityscope/cityscope_for_world/scanner/js/CV/MatrixTransform.js","resolved":"/Users/gokul/r/cityscope/cityscope_for_world/scanner/node_modules/core-js/index.js"},{"name":"./CV","loc":{"line":3,"column":28},"parent":"/Users/gokul/r/cityscope/cityscope_for_world/scanner/js/CV/MatrixTransform.js","resolved":"/Users/gokul/r/cityscope/cityscope_for_world/scanner/js/CV/CV.js"},{"name":"perspective-transform/dist/perspective-transform","loc":{"line":4,"column":21},"parent":"/Users/gokul/r/cityscope/cityscope_for_world/scanner/js/CV/MatrixTransform.js","resolved":"/Users/gokul/r/cityscope/cityscope_for_world/scanner/node_modules/perspective-transform/dist/perspective-transform.js"},{"name":"../Modules","loc":{"line":5,"column":50},"parent":"/Users/gokul/r/cityscope/cityscope_for_world/scanner/js/CV/MatrixTransform.js","resolved":"/Users/gokul/r/cityscope/cityscope_for_world/scanner/js/Modules.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.scanArrayMaker=o,exports.MatrixTransform=i,exports.drawPnt=f,require(\"../Storage\");var r=require(\"core-js\"),e=require(\"./CV\"),t=require(\"../Modules\"),a=require(\"perspective-transform/dist/perspective-transform\");function o(){for(var r=Storage.cityIOdataStruct,e=Storage.camCanvas,t=4*r.header.spatial.ncols,a=4*r.header.spatial.nrows,o=[],n=e.width/(t-1),i=e.height/(a-1),s=0;s<e.height;s+=4*i)for(var f=e.width;f>0;f-=4*n)for(var c=0;c<4*i;c+=i)for(var u=0;u<4*n;u+=n)o.push([f-u,s+c]);Storage.initialScannerGridArr=o}var n=new e.ColorPicker;function i(r){var e,o,i=Storage.camCanvas,c=Storage.initialScannerGridArr,u=[],h=[s(i)[0],s(i)[1],i.width,s(i)[1],s(i)[0],i.height,i.width,i.height];o=a(h,r);var d=[];document.querySelector(\"#svgKeystone\").innerHTML=\"\";for(var v=0;v<c.length;v++)e=o.transform(c[v][0],c[v][1]),d.push(f(e,\"magenta\",v)),u.push([Math.floor(e[0]),Math.floor(e[1])]);Storage.svgPntsArray=d,Storage.matrixGridLocArray=u,(0,t.updateInfoDIV)(\"Matrix Transformed 4 corners are at: \"+r),n.cancel(),n.start(),r=[]}function s(r){for(var e=0,t=0;null!=r;e+=r.offsetLeft,t+=r.offsetTop,r=r.offsetParent);return[e,t]}function f(r,e,a){return svgKeystone.appendChild((0,t.svgCircle)(r,e,1.5,.5,\"#000000\",.3))}"},"sourceMaps":{"js":{"mappings":[{"source":"js/CV/MatrixTransform.js","original":{"line":150,"column":1},"generated":{"line":1,"column":0}},{"source":"js/CV/MatrixTransform.js","original":{"line":150,"column":1},"generated":{"line":1,"column":13}},{"source":"js/CV/MatrixTransform.js","original":{"line":150,"column":1},"generated":{"line":1,"column":20}},{"source":"js/CV/MatrixTransform.js","original":{"line":150,"column":1},"generated":{"line":1,"column":35}},{"source":"js/CV/MatrixTransform.js","original":{"line":150,"column":1},"generated":{"line":1,"column":43}},{"source":"js/CV/MatrixTransform.js","original":{"line":150,"column":1},"generated":{"line":1,"column":56}},{"source":"js/CV/MatrixTransform.js","original":{"line":150,"column":1},"generated":{"line":1,"column":57}},{"source":"js/CV/MatrixTransform.js","original":{"line":150,"column":1},"generated":{"line":1,"column":64}},{"source":"js/CV/MatrixTransform.js","original":{"line":150,"column":1},"generated":{"line":1,"column":68}},{"source":"js/CV/MatrixTransform.js","original":{"line":150,"column":1},"generated":{"line":1,"column":76}},{"source":"js/CV/MatrixTransform.js","original":{"line":150,"column":1},"generated":{"line":1,"column":91}},{"source":"js/CV/MatrixTransform.js","original":{"line":150,"column":1},"generated":{"line":1,"column":93}},{"source":"js/CV/MatrixTransform.js","original":{"line":150,"column":1},"generated":{"line":1,"column":101}},{"source":"js/CV/MatrixTransform.js","original":{"line":150,"column":1},"generated":{"line":1,"column":117}},{"source":"js/CV/MatrixTransform.js","original":{"line":150,"column":1},"generated":{"line":1,"column":119}},{"source":"js/CV/MatrixTransform.js","original":{"line":150,"column":1},"generated":{"line":1,"column":127}},{"source":"js/CV/MatrixTransform.js","original":{"line":150,"column":1},"generated":{"line":1,"column":135}},{"source":"js/CV/MatrixTransform.js","original":{"line":1,"column":0},"generated":{"line":1,"column":137}},{"source":"js/CV/MatrixTransform.js","original":{"line":1,"column":0},"generated":{"line":1,"column":145}},{"source":"js/CV/MatrixTransform.js","original":{"line":2,"column":0},"generated":{"line":1,"column":159}},{"source":"js/CV/MatrixTransform.js","original":{"line":2,"column":0},"generated":{"line":1,"column":163}},{"source":"js/CV/MatrixTransform.js","original":{"line":2,"column":0},"generated":{"line":1,"column":165}},{"source":"js/CV/MatrixTransform.js","original":{"line":2,"column":0},"generated":{"line":1,"column":173}},{"source":"js/CV/MatrixTransform.js","original":{"line":3,"column":0},"generated":{"line":1,"column":184}},{"source":"js/CV/MatrixTransform.js","original":{"line":3,"column":0},"generated":{"line":1,"column":186}},{"source":"js/CV/MatrixTransform.js","original":{"line":3,"column":0},"generated":{"line":1,"column":194}},{"source":"js/CV/MatrixTransform.js","original":{"line":5,"column":0},"generated":{"line":1,"column":202}},{"source":"js/CV/MatrixTransform.js","original":{"line":5,"column":0},"generated":{"line":1,"column":204}},{"source":"js/CV/MatrixTransform.js","original":{"line":5,"column":0},"generated":{"line":1,"column":212}},{"source":"js/CV/MatrixTransform.js","name":"PerspT","original":{"line":4,"column":4},"generated":{"line":1,"column":226}},{"source":"js/CV/MatrixTransform.js","name":"require","original":{"line":4,"column":13},"generated":{"line":1,"column":228}},{"source":"js/CV/MatrixTransform.js","original":{"line":4,"column":21},"generated":{"line":1,"column":236}},{"source":"js/CV/MatrixTransform.js","original":{"line":11,"column":7},"generated":{"line":1,"column":288}},{"source":"js/CV/MatrixTransform.js","name":"scanArrayMaker","original":{"line":11,"column":16},"generated":{"line":1,"column":297}},{"source":"js/CV/MatrixTransform.js","original":{"line":25,"column":7},"generated":{"line":1,"column":301}},{"source":"js/CV/MatrixTransform.js","name":"cityIOdataStruct","original":{"line":12,"column":6},"generated":{"line":1,"column":305}},{"source":"js/CV/MatrixTransform.js","name":"cityIOdataStruct","original":{"line":12,"column":6},"generated":{"line":1,"column":309}},{"source":"js/CV/MatrixTransform.js","name":"Storage","original":{"line":12,"column":25},"generated":{"line":1,"column":311}},{"source":"js/CV/MatrixTransform.js","name":"cityIOdataStruct","original":{"line":12,"column":33},"generated":{"line":1,"column":319}},{"source":"js/CV/MatrixTransform.js","name":"camCanvas","original":{"line":14,"column":6},"generated":{"line":1,"column":336}},{"source":"js/CV/MatrixTransform.js","name":"Storage","original":{"line":14,"column":18},"generated":{"line":1,"column":338}},{"source":"js/CV/MatrixTransform.js","name":"camCanvas","original":{"line":14,"column":26},"generated":{"line":1,"column":346}},{"source":"js/CV/MatrixTransform.js","name":"gridCols","original":{"line":16,"column":6},"generated":{"line":1,"column":356}},{"source":"js/CV/MatrixTransform.js","original":{"line":16,"column":57},"generated":{"line":1,"column":358}},{"source":"js/CV/MatrixTransform.js","name":"cityIOdataStruct","original":{"line":16,"column":17},"generated":{"line":1,"column":360}},{"source":"js/CV/MatrixTransform.js","name":"header","original":{"line":16,"column":34},"generated":{"line":1,"column":362}},{"source":"js/CV/MatrixTransform.js","name":"spatial","original":{"line":16,"column":41},"generated":{"line":1,"column":369}},{"source":"js/CV/MatrixTransform.js","name":"ncols","original":{"line":16,"column":49},"generated":{"line":1,"column":377}},{"source":"js/CV/MatrixTransform.js","name":"gridRows","original":{"line":17,"column":6},"generated":{"line":1,"column":383}},{"source":"js/CV/MatrixTransform.js","original":{"line":17,"column":57},"generated":{"line":1,"column":385}},{"source":"js/CV/MatrixTransform.js","name":"cityIOdataStruct","original":{"line":17,"column":17},"generated":{"line":1,"column":387}},{"source":"js/CV/MatrixTransform.js","name":"header","original":{"line":17,"column":34},"generated":{"line":1,"column":389}},{"source":"js/CV/MatrixTransform.js","name":"spatial","original":{"line":17,"column":41},"generated":{"line":1,"column":396}},{"source":"js/CV/MatrixTransform.js","name":"nrows","original":{"line":17,"column":49},"generated":{"line":1,"column":404}},{"source":"js/CV/MatrixTransform.js","name":"initialScannerGridArr","original":{"line":20,"column":6},"generated":{"line":1,"column":410}},{"source":"js/CV/MatrixTransform.js","original":{"line":20,"column":30},"generated":{"line":1,"column":412}},{"source":"js/CV/MatrixTransform.js","name":"ratX","original":{"line":22,"column":6},"generated":{"line":1,"column":415}},{"source":"js/CV/MatrixTransform.js","name":"camCanvas","original":{"line":22,"column":13},"generated":{"line":1,"column":417}},{"source":"js/CV/MatrixTransform.js","name":"width","original":{"line":22,"column":23},"generated":{"line":1,"column":419}},{"source":"js/CV/MatrixTransform.js","name":"gridCols","original":{"line":22,"column":32},"generated":{"line":1,"column":426}},{"source":"js/CV/MatrixTransform.js","original":{"line":22,"column":43},"generated":{"line":1,"column":428}},{"source":"js/CV/MatrixTransform.js","name":"ratY","original":{"line":23,"column":6},"generated":{"line":1,"column":431}},{"source":"js/CV/MatrixTransform.js","name":"camCanvas","original":{"line":23,"column":13},"generated":{"line":1,"column":433}},{"source":"js/CV/MatrixTransform.js","name":"height","original":{"line":23,"column":23},"generated":{"line":1,"column":435}},{"source":"js/CV/MatrixTransform.js","name":"gridRows","original":{"line":23,"column":33},"generated":{"line":1,"column":443}},{"source":"js/CV/MatrixTransform.js","original":{"line":23,"column":44},"generated":{"line":1,"column":445}},{"source":"js/CV/MatrixTransform.js","name":"outCols","original":{"line":25,"column":11},"generated":{"line":1,"column":448}},{"source":"js/CV/MatrixTransform.js","original":{"line":25,"column":21},"generated":{"line":1,"column":450}},{"source":"js/CV/MatrixTransform.js","name":"outCols","original":{"line":25,"column":24},"generated":{"line":1,"column":452}},{"source":"js/CV/MatrixTransform.js","name":"camCanvas","original":{"line":25,"column":34},"generated":{"line":1,"column":454}},{"source":"js/CV/MatrixTransform.js","name":"height","original":{"line":25,"column":44},"generated":{"line":1,"column":456}},{"source":"js/CV/MatrixTransform.js","name":"outCols","original":{"line":25,"column":52},"generated":{"line":1,"column":463}},{"source":"js/CV/MatrixTransform.js","original":{"line":25,"column":70},"generated":{"line":1,"column":466}},{"source":"js/CV/MatrixTransform.js","name":"ratY","original":{"line":25,"column":63},"generated":{"line":1,"column":468}},{"source":"js/CV/MatrixTransform.js","original":{"line":26,"column":9},"generated":{"line":1,"column":470}},{"source":"js/CV/MatrixTransform.js","original":{"line":26,"column":9},"generated":{"line":1,"column":474}},{"source":"js/CV/MatrixTransform.js","name":"outRows","original":{"line":26,"column":13},"generated":{"line":1,"column":478}},{"source":"js/CV/MatrixTransform.js","name":"camCanvas","original":{"line":26,"column":23},"generated":{"line":1,"column":480}},{"source":"js/CV/MatrixTransform.js","name":"width","original":{"line":26,"column":33},"generated":{"line":1,"column":482}},{"source":"js/CV/MatrixTransform.js","name":"outRows","original":{"line":26,"column":40},"generated":{"line":1,"column":488}},{"source":"js/CV/MatrixTransform.js","original":{"line":26,"column":50},"generated":{"line":1,"column":490}},{"source":"js/CV/MatrixTransform.js","name":"outRows","original":{"line":26,"column":53},"generated":{"line":1,"column":492}},{"source":"js/CV/MatrixTransform.js","original":{"line":26,"column":71},"generated":{"line":1,"column":495}},{"source":"js/CV/MatrixTransform.js","name":"ratX","original":{"line":26,"column":64},"generated":{"line":1,"column":497}},{"source":"js/CV/MatrixTransform.js","original":{"line":28,"column":11},"generated":{"line":1,"column":499}},{"source":"js/CV/MatrixTransform.js","original":{"line":28,"column":11},"generated":{"line":1,"column":503}},{"source":"js/CV/MatrixTransform.js","name":"inCols","original":{"line":28,"column":15},"generated":{"line":1,"column":507}},{"source":"js/CV/MatrixTransform.js","original":{"line":28,"column":24},"generated":{"line":1,"column":509}},{"source":"js/CV/MatrixTransform.js","name":"inCols","original":{"line":28,"column":27},"generated":{"line":1,"column":511}},{"source":"js/CV/MatrixTransform.js","original":{"line":28,"column":43},"generated":{"line":1,"column":513}},{"source":"js/CV/MatrixTransform.js","name":"ratY","original":{"line":28,"column":36},"generated":{"line":1,"column":515}},{"source":"js/CV/MatrixTransform.js","name":"inCols","original":{"line":28,"column":46},"generated":{"line":1,"column":517}},{"source":"js/CV/MatrixTransform.js","name":"ratY","original":{"line":28,"column":56},"generated":{"line":1,"column":520}},{"source":"js/CV/MatrixTransform.js","original":{"line":29,"column":13},"generated":{"line":1,"column":522}},{"source":"js/CV/MatrixTransform.js","original":{"line":29,"column":13},"generated":{"line":1,"column":526}},{"source":"js/CV/MatrixTransform.js","name":"inRows","original":{"line":29,"column":17},"generated":{"line":1,"column":530}},{"source":"js/CV/MatrixTransform.js","original":{"line":29,"column":26},"generated":{"line":1,"column":532}},{"source":"js/CV/MatrixTransform.js","name":"inRows","original":{"line":29,"column":29},"generated":{"line":1,"column":534}},{"source":"js/CV/MatrixTransform.js","original":{"line":29,"column":45},"generated":{"line":1,"column":536}},{"source":"js/CV/MatrixTransform.js","name":"ratX","original":{"line":29,"column":38},"generated":{"line":1,"column":538}},{"source":"js/CV/MatrixTransform.js","name":"inRows","original":{"line":29,"column":48},"generated":{"line":1,"column":540}},{"source":"js/CV/MatrixTransform.js","name":"ratX","original":{"line":29,"column":58},"generated":{"line":1,"column":543}},{"source":"js/CV/MatrixTransform.js","name":"initialScannerGridArr","original":{"line":31,"column":10},"generated":{"line":1,"column":545}},{"source":"js/CV/MatrixTransform.js","name":"push","original":{"line":31,"column":32},"generated":{"line":1,"column":547}},{"source":"js/CV/MatrixTransform.js","original":{"line":31,"column":37},"generated":{"line":1,"column":552}},{"source":"js/CV/MatrixTransform.js","name":"outRows","original":{"line":31,"column":38},"generated":{"line":1,"column":553}},{"source":"js/CV/MatrixTransform.js","name":"inRows","original":{"line":31,"column":48},"generated":{"line":1,"column":555}},{"source":"js/CV/MatrixTransform.js","name":"outCols","original":{"line":31,"column":56},"generated":{"line":1,"column":557}},{"source":"js/CV/MatrixTransform.js","name":"inCols","original":{"line":31,"column":66},"generated":{"line":1,"column":559}},{"source":"js/CV/MatrixTransform.js","name":"Storage","original":{"line":36,"column":2},"generated":{"line":1,"column":563}},{"source":"js/CV/MatrixTransform.js","name":"initialScannerGridArr","original":{"line":36,"column":10},"generated":{"line":1,"column":571}},{"source":"js/CV/MatrixTransform.js","name":"initialScannerGridArr","original":{"line":36,"column":34},"generated":{"line":1,"column":593}},{"source":"js/CV/MatrixTransform.js","original":{"line":41,"column":0},"generated":{"line":1,"column":595}},{"source":"js/CV/MatrixTransform.js","name":"colorPicker","original":{"line":41,"column":4},"generated":{"line":1,"column":599}},{"source":"js/CV/MatrixTransform.js","original":{"line":41,"column":18},"generated":{"line":1,"column":601}},{"source":"js/CV/MatrixTransform.js","name":"ColorPicker","original":{"line":41,"column":22},"generated":{"line":1,"column":605}},{"source":"js/CV/MatrixTransform.js","original":{"line":41,"column":18},"generated":{"line":1,"column":607}},{"source":"js/CV/MatrixTransform.js","original":{"line":44,"column":7},"generated":{"line":1,"column":619}},{"source":"js/CV/MatrixTransform.js","name":"MatrixTransform","original":{"line":44,"column":16},"generated":{"line":1,"column":628}},{"source":"js/CV/MatrixTransform.js","name":"gridCorners","original":{"line":44,"column":32},"generated":{"line":1,"column":630}},{"source":"js/CV/MatrixTransform.js","name":"camCanvas","original":{"line":46,"column":6},"generated":{"line":1,"column":633}},{"source":"js/CV/MatrixTransform.js","name":"dstPt","original":{"line":65,"column":6},"generated":{"line":1,"column":637}},{"source":"js/CV/MatrixTransform.js","name":"perspTres","original":{"line":68,"column":6},"generated":{"line":1,"column":639}},{"source":"js/CV/MatrixTransform.js","name":"camCanvas","original":{"line":46,"column":6},"generated":{"line":1,"column":641}},{"source":"js/CV/MatrixTransform.js","name":"Storage","original":{"line":46,"column":18},"generated":{"line":1,"column":643}},{"source":"js/CV/MatrixTransform.js","name":"camCanvas","original":{"line":46,"column":26},"generated":{"line":1,"column":651}},{"source":"js/CV/MatrixTransform.js","name":"initialScannerGridArr","original":{"line":48,"column":6},"generated":{"line":1,"column":661}},{"source":"js/CV/MatrixTransform.js","name":"Storage","original":{"line":48,"column":30},"generated":{"line":1,"column":663}},{"source":"js/CV/MatrixTransform.js","name":"initialScannerGridArr","original":{"line":48,"column":38},"generated":{"line":1,"column":671}},{"source":"js/CV/MatrixTransform.js","name":"matrixGridLocArray","original":{"line":50,"column":6},"generated":{"line":1,"column":693}},{"source":"js/CV/MatrixTransform.js","original":{"line":50,"column":27},"generated":{"line":1,"column":695}},{"source":"js/CV/MatrixTransform.js","name":"srcCorners","original":{"line":54,"column":6},"generated":{"line":1,"column":698}},{"source":"js/CV/MatrixTransform.js","original":{"line":54,"column":19},"generated":{"line":1,"column":700}},{"source":"js/CV/MatrixTransform.js","name":"getPos","original":{"line":55,"column":4},"generated":{"line":1,"column":701}},{"source":"js/CV/MatrixTransform.js","name":"camCanvas","original":{"line":55,"column":11},"generated":{"line":1,"column":703}},{"source":"js/CV/MatrixTransform.js","original":{"line":55,"column":22},"generated":{"line":1,"column":706}},{"source":"js/CV/MatrixTransform.js","name":"getPos","original":{"line":56,"column":4},"generated":{"line":1,"column":709}},{"source":"js/CV/MatrixTransform.js","name":"camCanvas","original":{"line":56,"column":11},"generated":{"line":1,"column":711}},{"source":"js/CV/MatrixTransform.js","original":{"line":56,"column":22},"generated":{"line":1,"column":714}},{"source":"js/CV/MatrixTransform.js","name":"camCanvas","original":{"line":57,"column":4},"generated":{"line":1,"column":717}},{"source":"js/CV/MatrixTransform.js","name":"width","original":{"line":57,"column":14},"generated":{"line":1,"column":719}},{"source":"js/CV/MatrixTransform.js","name":"getPos","original":{"line":58,"column":4},"generated":{"line":1,"column":725}},{"source":"js/CV/MatrixTransform.js","name":"camCanvas","original":{"line":58,"column":11},"generated":{"line":1,"column":727}},{"source":"js/CV/MatrixTransform.js","original":{"line":58,"column":22},"generated":{"line":1,"column":730}},{"source":"js/CV/MatrixTransform.js","name":"getPos","original":{"line":59,"column":4},"generated":{"line":1,"column":733}},{"source":"js/CV/MatrixTransform.js","name":"camCanvas","original":{"line":59,"column":11},"generated":{"line":1,"column":735}},{"source":"js/CV/MatrixTransform.js","original":{"line":59,"column":22},"generated":{"line":1,"column":738}},{"source":"js/CV/MatrixTransform.js","name":"camCanvas","original":{"line":60,"column":4},"generated":{"line":1,"column":741}},{"source":"js/CV/MatrixTransform.js","name":"height","original":{"line":60,"column":14},"generated":{"line":1,"column":743}},{"source":"js/CV/MatrixTransform.js","name":"camCanvas","original":{"line":61,"column":4},"generated":{"line":1,"column":750}},{"source":"js/CV/MatrixTransform.js","name":"width","original":{"line":61,"column":14},"generated":{"line":1,"column":752}},{"source":"js/CV/MatrixTransform.js","name":"camCanvas","original":{"line":62,"column":4},"generated":{"line":1,"column":758}},{"source":"js/CV/MatrixTransform.js","name":"height","original":{"line":62,"column":14},"generated":{"line":1,"column":760}},{"source":"js/CV/MatrixTransform.js","name":"perspTres","original":{"line":69,"column":2},"generated":{"line":1,"column":768}},{"source":"js/CV/MatrixTransform.js","name":"PerspT","original":{"line":69,"column":14},"generated":{"line":1,"column":770}},{"source":"js/CV/MatrixTransform.js","name":"srcCorners","original":{"line":69,"column":21},"generated":{"line":1,"column":772}},{"source":"js/CV/MatrixTransform.js","name":"gridCorners","original":{"line":69,"column":33},"generated":{"line":1,"column":774}},{"source":"js/CV/MatrixTransform.js","name":"svgPntsArray","original":{"line":70,"column":6},"generated":{"line":1,"column":777}},{"source":"js/CV/MatrixTransform.js","name":"svgPntsArray","original":{"line":70,"column":6},"generated":{"line":1,"column":781}},{"source":"js/CV/MatrixTransform.js","original":{"line":70,"column":21},"generated":{"line":1,"column":783}},{"source":"js/CV/MatrixTransform.js","name":"document","original":{"line":71,"column":20},"generated":{"line":1,"column":786}},{"source":"js/CV/MatrixTransform.js","name":"querySelector","original":{"line":71,"column":29},"generated":{"line":1,"column":795}},{"source":"js/CV/MatrixTransform.js","original":{"line":71,"column":43},"generated":{"line":1,"column":809}},{"source":"js/CV/MatrixTransform.js","name":"innerHTML","original":{"line":73,"column":14},"generated":{"line":1,"column":825}},{"source":"js/CV/MatrixTransform.js","original":{"line":73,"column":26},"generated":{"line":1,"column":835}},{"source":"js/CV/MatrixTransform.js","original":{"line":75,"column":7},"generated":{"line":1,"column":838}},{"source":"js/CV/MatrixTransform.js","original":{"line":75,"column":7},"generated":{"line":1,"column":842}},{"source":"js/CV/MatrixTransform.js","name":"i","original":{"line":75,"column":11},"generated":{"line":1,"column":846}},{"source":"js/CV/MatrixTransform.js","original":{"line":75,"column":15},"generated":{"line":1,"column":848}},{"source":"js/CV/MatrixTransform.js","name":"i","original":{"line":75,"column":18},"generated":{"line":1,"column":850}},{"source":"js/CV/MatrixTransform.js","name":"initialScannerGridArr","original":{"line":75,"column":22},"generated":{"line":1,"column":852}},{"source":"js/CV/MatrixTransform.js","name":"length","original":{"line":75,"column":44},"generated":{"line":1,"column":854}},{"source":"js/CV/MatrixTransform.js","name":"i","original":{"line":75,"column":52},"generated":{"line":1,"column":861}},{"source":"js/CV/MatrixTransform.js","name":"dstPt","original":{"line":83,"column":4},"generated":{"line":1,"column":865}},{"source":"js/CV/MatrixTransform.js","name":"perspTres","original":{"line":83,"column":12},"generated":{"line":1,"column":867}},{"source":"js/CV/MatrixTransform.js","name":"transform","original":{"line":83,"column":22},"generated":{"line":1,"column":869}},{"source":"js/CV/MatrixTransform.js","name":"initialScannerGridArr","original":{"line":84,"column":6},"generated":{"line":1,"column":879}},{"source":"js/CV/MatrixTransform.js","name":"i","original":{"line":84,"column":28},"generated":{"line":1,"column":881}},{"source":"js/CV/MatrixTransform.js","original":{"line":84,"column":31},"generated":{"line":1,"column":884}},{"source":"js/CV/MatrixTransform.js","name":"initialScannerGridArr","original":{"line":85,"column":6},"generated":{"line":1,"column":887}},{"source":"js/CV/MatrixTransform.js","name":"i","original":{"line":85,"column":28},"generated":{"line":1,"column":889}},{"source":"js/CV/MatrixTransform.js","original":{"line":85,"column":31},"generated":{"line":1,"column":892}},{"source":"js/CV/MatrixTransform.js","name":"svgPntsArray","original":{"line":88,"column":4},"generated":{"line":1,"column":896}},{"source":"js/CV/MatrixTransform.js","name":"push","original":{"line":88,"column":17},"generated":{"line":1,"column":898}},{"source":"js/CV/MatrixTransform.js","name":"drawPnt","original":{"line":88,"column":22},"generated":{"line":1,"column":903}},{"source":"js/CV/MatrixTransform.js","name":"dstPt","original":{"line":88,"column":30},"generated":{"line":1,"column":905}},{"source":"js/CV/MatrixTransform.js","original":{"line":88,"column":37},"generated":{"line":1,"column":907}},{"source":"js/CV/MatrixTransform.js","name":"i","original":{"line":88,"column":48},"generated":{"line":1,"column":917}},{"source":"js/CV/MatrixTransform.js","name":"matrixGridLocArray","original":{"line":91,"column":4},"generated":{"line":1,"column":921}},{"source":"js/CV/MatrixTransform.js","name":"push","original":{"line":91,"column":23},"generated":{"line":1,"column":923}},{"source":"js/CV/MatrixTransform.js","original":{"line":91,"column":28},"generated":{"line":1,"column":928}},{"source":"js/CV/MatrixTransform.js","name":"Math","original":{"line":91,"column":29},"generated":{"line":1,"column":929}},{"source":"js/CV/MatrixTransform.js","name":"floor","original":{"line":91,"column":34},"generated":{"line":1,"column":934}},{"source":"js/CV/MatrixTransform.js","name":"dstPt","original":{"line":91,"column":40},"generated":{"line":1,"column":940}},{"source":"js/CV/MatrixTransform.js","original":{"line":91,"column":46},"generated":{"line":1,"column":942}},{"source":"js/CV/MatrixTransform.js","name":"Math","original":{"line":91,"column":51},"generated":{"line":1,"column":946}},{"source":"js/CV/MatrixTransform.js","name":"floor","original":{"line":91,"column":56},"generated":{"line":1,"column":951}},{"source":"js/CV/MatrixTransform.js","name":"dstPt","original":{"line":91,"column":62},"generated":{"line":1,"column":957}},{"source":"js/CV/MatrixTransform.js","original":{"line":91,"column":68},"generated":{"line":1,"column":959}},{"source":"js/CV/MatrixTransform.js","name":"Storage","original":{"line":95,"column":2},"generated":{"line":1,"column":965}},{"source":"js/CV/MatrixTransform.js","name":"svgPntsArray","original":{"line":95,"column":10},"generated":{"line":1,"column":973}},{"source":"js/CV/MatrixTransform.js","name":"svgPntsArray","original":{"line":95,"column":25},"generated":{"line":1,"column":986}},{"source":"js/CV/MatrixTransform.js","name":"Storage","original":{"line":97,"column":2},"generated":{"line":1,"column":988}},{"source":"js/CV/MatrixTransform.js","name":"matrixGridLocArray","original":{"line":97,"column":10},"generated":{"line":1,"column":996}},{"source":"js/CV/MatrixTransform.js","name":"matrixGridLocArray","original":{"line":97,"column":31},"generated":{"line":1,"column":1015}},{"source":"js/CV/MatrixTransform.js","original":{"line":98,"column":16},"generated":{"line":1,"column":1018}},{"source":"js/CV/MatrixTransform.js","original":{"line":98,"column":16},"generated":{"line":1,"column":1020}},{"source":"js/CV/MatrixTransform.js","original":{"line":98,"column":16},"generated":{"line":1,"column":1022}},{"source":"js/CV/MatrixTransform.js","original":{"line":98,"column":16},"generated":{"line":1,"column":1037}},{"source":"js/CV/MatrixTransform.js","name":"gridCorners","original":{"line":98,"column":58},"generated":{"line":1,"column":1077}},{"source":"js/CV/MatrixTransform.js","name":"colorPicker","original":{"line":101,"column":2},"generated":{"line":1,"column":1080}},{"source":"js/CV/MatrixTransform.js","name":"cancel","original":{"line":101,"column":14},"generated":{"line":1,"column":1082}},{"source":"js/CV/MatrixTransform.js","name":"colorPicker","original":{"line":102,"column":2},"generated":{"line":1,"column":1091}},{"source":"js/CV/MatrixTransform.js","name":"start","original":{"line":102,"column":14},"generated":{"line":1,"column":1093}},{"source":"js/CV/MatrixTransform.js","name":"gridCorners","original":{"line":104,"column":2},"generated":{"line":1,"column":1101}},{"source":"js/CV/MatrixTransform.js","original":{"line":104,"column":16},"generated":{"line":1,"column":1103}},{"source":"js/CV/MatrixTransform.js","original":{"line":110,"column":0},"generated":{"line":1,"column":1106}},{"source":"js/CV/MatrixTransform.js","name":"getPos","original":{"line":110,"column":9},"generated":{"line":1,"column":1115}},{"source":"js/CV/MatrixTransform.js","name":"divPos","original":{"line":110,"column":16},"generated":{"line":1,"column":1117}},{"source":"js/CV/MatrixTransform.js","original":{"line":113,"column":4},"generated":{"line":1,"column":1120}},{"source":"js/CV/MatrixTransform.js","original":{"line":113,"column":4},"generated":{"line":1,"column":1124}},{"source":"js/CV/MatrixTransform.js","name":"lx","original":{"line":113,"column":8},"generated":{"line":1,"column":1128}},{"source":"js/CV/MatrixTransform.js","original":{"line":113,"column":13},"generated":{"line":1,"column":1130}},{"source":"js/CV/MatrixTransform.js","name":"ly","original":{"line":113,"column":16},"generated":{"line":1,"column":1132}},{"source":"js/CV/MatrixTransform.js","original":{"line":113,"column":21},"generated":{"line":1,"column":1134}},{"source":"js/CV/MatrixTransform.js","original":{"line":114,"column":14},"generated":{"line":1,"column":1136}},{"source":"js/CV/MatrixTransform.js","name":"divPos","original":{"line":114,"column":4},"generated":{"line":1,"column":1142}},{"source":"js/CV/MatrixTransform.js","name":"lx","original":{"line":115,"column":4},"generated":{"line":1,"column":1144}},{"source":"js/CV/MatrixTransform.js","name":"divPos","original":{"line":115,"column":10},"generated":{"line":1,"column":1147}},{"source":"js/CV/MatrixTransform.js","name":"offsetLeft","original":{"line":115,"column":17},"generated":{"line":1,"column":1149}},{"source":"js/CV/MatrixTransform.js","name":"ly","original":{"line":116,"column":6},"generated":{"line":1,"column":1160}},{"source":"js/CV/MatrixTransform.js","name":"divPos","original":{"line":116,"column":12},"generated":{"line":1,"column":1163}},{"source":"js/CV/MatrixTransform.js","name":"offsetTop","original":{"line":116,"column":19},"generated":{"line":1,"column":1165}},{"source":"js/CV/MatrixTransform.js","name":"divPos","original":{"line":117,"column":6},"generated":{"line":1,"column":1175}},{"source":"js/CV/MatrixTransform.js","name":"divPos","original":{"line":117,"column":15},"generated":{"line":1,"column":1177}},{"source":"js/CV/MatrixTransform.js","name":"offsetParent","original":{"line":117,"column":22},"generated":{"line":1,"column":1179}},{"source":"js/CV/MatrixTransform.js","original":{"line":119,"column":9},"generated":{"line":1,"column":1193}},{"source":"js/CV/MatrixTransform.js","original":{"line":119,"column":9},"generated":{"line":1,"column":1199}},{"source":"js/CV/MatrixTransform.js","name":"lx","original":{"line":119,"column":10},"generated":{"line":1,"column":1200}},{"source":"js/CV/MatrixTransform.js","name":"ly","original":{"line":119,"column":14},"generated":{"line":1,"column":1202}},{"source":"js/CV/MatrixTransform.js","original":{"line":124,"column":7},"generated":{"line":1,"column":1205}},{"source":"js/CV/MatrixTransform.js","name":"drawPnt","original":{"line":124,"column":16},"generated":{"line":1,"column":1214}},{"source":"js/CV/MatrixTransform.js","name":"dstPt","original":{"line":124,"column":24},"generated":{"line":1,"column":1216}},{"source":"js/CV/MatrixTransform.js","name":"color","original":{"line":124,"column":31},"generated":{"line":1,"column":1218}},{"source":"js/CV/MatrixTransform.js","name":"text","original":{"line":124,"column":38},"generated":{"line":1,"column":1220}},{"source":"js/CV/MatrixTransform.js","name":"thisPnt","original":{"line":132,"column":9},"generated":{"line":1,"column":1223}},{"source":"js/CV/MatrixTransform.js","name":"svgKeystone","original":{"line":129,"column":16},"generated":{"line":1,"column":1230}},{"source":"js/CV/MatrixTransform.js","name":"appendChild","original":{"line":129,"column":28},"generated":{"line":1,"column":1242}},{"source":"js/CV/MatrixTransform.js","original":{"line":130,"column":4},"generated":{"line":1,"column":1255}},{"source":"js/CV/MatrixTransform.js","name":"dstPt","original":{"line":130,"column":14},"generated":{"line":1,"column":1257}},{"source":"js/CV/MatrixTransform.js","name":"dstPt","original":{"line":130,"column":14},"generated":{"line":1,"column":1259}},{"source":"js/CV/MatrixTransform.js","name":"dstPt","original":{"line":130,"column":14},"generated":{"line":1,"column":1270}},{"source":"js/CV/MatrixTransform.js","name":"color","original":{"line":130,"column":21},"generated":{"line":1,"column":1272}},{"source":"js/CV/MatrixTransform.js","original":{"line":130,"column":28},"generated":{"line":1,"column":1274}},{"source":"js/CV/MatrixTransform.js","original":{"line":130,"column":33},"generated":{"line":1,"column":1278}},{"source":"js/CV/MatrixTransform.js","original":{"line":130,"column":38},"generated":{"line":1,"column":1281}},{"source":"js/CV/MatrixTransform.js","original":{"line":130,"column":49},"generated":{"line":1,"column":1291}}],"sources":{"js/CV/MatrixTransform.js":"import \"../Storage\";\nimport { _ } from \"core-js\";\nimport { ColorPicker } from \"./CV\";\nvar PerspT = require(\"perspective-transform/dist/perspective-transform\");\nimport { svgCircle, svgText, updateInfoDIV } from \"../Modules\";\n\n///////////////////////////////////////////////////////////////////////////\n// a function to make the initial generic array of\n//evenly divided grid points before distorting & scanning\n\nexport function scanArrayMaker() {\n  var cityIOdataStruct = Storage.cityIOdataStruct;\n  //get the camera canvas\n  var camCanvas = Storage.camCanvas;\n  //amount of grid pixels from settings JSON\n  var gridCols = cityIOdataStruct.header.spatial.ncols * 4;\n  var gridRows = cityIOdataStruct.header.spatial.nrows * 4;\n\n  //init the array\n  var initialScannerGridArr = [];\n  //get canvas ratio to divided by #-1 of points\n  let ratX = camCanvas.width / (gridCols - 1);\n  let ratY = camCanvas.height / (gridRows - 1);\n  //outer two loops create the rows and cols of each brick\n  for (let outCols = 0; outCols < camCanvas.height; outCols += ratY * 4) {\n    for (let outRows = camCanvas.width; outRows > 0; outRows -= ratX * 4) {\n      //inner loops create the 4x4 points of the brick itself\n      for (let inCols = 0; inCols < ratY * 4; inCols += ratY) {\n        for (let inRows = 0; inRows < ratX * 4; inRows += ratX) {\n          //push the location into array\n          initialScannerGridArr.push([outRows - inRows, outCols + inCols]);\n        }\n      }\n    }\n  }\n  Storage.initialScannerGridArr = initialScannerGridArr;\n}\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////\n//GLOBAL FOR NOW\nlet colorPicker = new ColorPicker();\n\n//create the scanning transposed matrix\nexport function MatrixTransform(gridCorners) {\n  //get canvas from Storage\n  var camCanvas = Storage.camCanvas;\n  // returns a new baseline grid of locations as Array\n  let initialScannerGridArr = Storage.initialScannerGridArr;\n  //matrix Grid Location Array\n  var matrixGridLocArray = [];\n  //set the reference points of the 4 edges of the canvas\n  // to get 100% of the image/video in canvas\n  //before distorting\n  var srcCorners = [\n    getPos(camCanvas)[0],\n    getPos(camCanvas)[1],\n    camCanvas.width,\n    getPos(camCanvas)[1],\n    getPos(camCanvas)[0],\n    camCanvas.height,\n    camCanvas.width,\n    camCanvas.height\n  ];\n  //var for the distorted points\n  let dstPt;\n  // use perspT lib to calculate transform matrix\n  //and store the results of the 4 points dist. in var perspT\n  let perspTres;\n  perspTres = PerspT(srcCorners, gridCorners);\n  var svgPntsArray = [];\n  var svgKeystone = document.querySelector(\"#svgKeystone\");\n  // clear SVG at start\n  svgKeystone.innerHTML = \"\";\n  //distort each dot in the matrix to locations and make cubes\n  for (let i = 0; i < initialScannerGridArr.length; i++) {\n    /*\n    drawPnt(\n      [initialScannerGridArr[i][0], initialScannerGridArr[i][1]],\n      \"green\",\n      i\n    );\n    */\n    dstPt = perspTres.transform(\n      initialScannerGridArr[i][0],\n      initialScannerGridArr[i][1]\n    );\n    // Draw the grid pnt and put it in an array\n    svgPntsArray.push(drawPnt(dstPt, \"magenta\", i));\n\n    //push these locs to an array for scanning\n    matrixGridLocArray.push([Math.floor(dstPt[0]), Math.floor(dstPt[1])]);\n  }\n\n  //save to Storage class\n  Storage.svgPntsArray = svgPntsArray;\n  //save points to Storage\n  Storage.matrixGridLocArray = matrixGridLocArray;\n  updateInfoDIV(\"Matrix Transformed 4 corners are at: \" + gridCorners);\n\n  //start picking colors\n  colorPicker.cancel();\n  colorPicker.start();\n  //reset the base corners\n  gridCorners = [];\n}\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n//method to get this div position\nfunction getPos(divPos) {\n  // yay readability\n  for (\n    var lx = 0, ly = 0;\n    divPos != null;\n    lx += divPos.offsetLeft,\n      ly += divPos.offsetTop,\n      divPos = divPos.offsetParent\n  );\n  return [lx, ly];\n}\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nexport function drawPnt(dstPt, color, text) {\n  //show points' text\n  // svgKeystone.appendChild(svgText(dstPt, text, 6));\n\n  //create visuals points on canvas for ref and add to array\n  var thisPnt = svgKeystone.appendChild(\n    svgCircle(dstPt, color, 1.5, 0.5, \"#000000\", 0.3)\n  );\n  return thisPnt;\n\n  /*  \n  // show text for each grid pnt\n  svgKeystone.appendChild(svgText(dstPt, j, 8));\n  //Save for basline grid draw\n  let counter = 0;\n  let counter_inner = 0;\n  // draw points if needed\n  let t = svgText([rows, cols], counter, 5);\n  let c = svgCircle([rows, cols], \"green\", 10, 1, \"green\", 10);\n  let c2 = svgCircle([rows + i, cols + j], \"green\", 10, 1, \"green\", 2);\n  let t2 = svgText([rows + i, cols + j], counter_inner, 2);\n  svgKeystone.appendChild(c2, t2);\n  //\n  counter_inner++;\n  counter++;\n  */\n}\n"},"lineCount":null}},"error":null,"hash":"3945c12d9d1180c2ad264bcf203a515a","cacheData":{"env":{}}}